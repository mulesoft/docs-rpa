# Usecase: Extract Data from a Legacy System

Extracting data from legacy systems is a common use case for RPA. 

This example illustrates the following tasks:

* Copy the contents from a PDF file to a text file.
* Compare strings.
* Copy a substring from a text file.
* Find text on a screen using optical character recognition (OCR).
* Interact with a screen using mouse actions and key strokes.
* Use activity parameters to transfer data.

## Example Scenario

Imagine you work as an accountant at Mythical University. Mythical University has ordered a travel package for one of their field excursions. You have received an email and saved the attached order confirmation to your computer.

This is what an order confirmation of your travel agency Wonderlust Travel typically looks like:

[[confirmationletter-image]]
image::usecase-1-wonderlusttravels-orderconfirmation-pdf.png[Order confirmation letter in PDF format, 75%]

You need to search the order ID in your order tracking system to get the corresponding tracking number, which you need to reference in your payment.

Unfortunately your order tracking system is very old and can only be accessed by typing in and reading from a terminal screen:

[[trackingsystem-allentries-image]]
image::as400ordertrackingscreen.png[Legacy order tracking system shown as text in a terminal, 75%]

You click the search field, enter the order ID, and click 'Search'.

[[trackingsystem-noentries-image]]
image::as400ordertrackingscreen-searchresult-ordernotfound.png[Legacy order tracking system doesn't show search results, 75%]

The list of orders is empty now. This could either mean that the order is not there or you mistyped the number. Let's assume that the latter is the case. You try again and the list shows the corresponding entry:

[[trackingsystem-resultentry-image]]
image::as400ordertrackingscreen-searchresult-orderfound.png[Legacy order tracking system shows a search result, 75%]

Now you can copy the tracking number and reference it in your payment.

Since all the scientists at Mythical University travel a lot, you have to repeat this tedious, error-prone and risky process several times per day. 

You decide to get a bot to do this.   

The following example shows how you could automate the retrieving of the order ID from a PDF and the tracking number from the legacy system using MuleSoft RPA as an invocable automation step. How to download the right attachment before and how to proceed afterwards, are part of other examples.

## Design a Model of the Process in RPA Manager

In RPA Manager, you open a new project and design a model of the process.

The model contains the following steps:

. Extract the order ID from the order confirmation 
. Extract the corresponding tracking number from the legacy system
. Return either the tracking number or an information that it could not be found.

image::extractrackingnumber-bpmn.png[Model of the tracking number extraction process]

The user tasks are for illustrational purposes and can be replaced by steps to prepare the returned data for processing in another automation step.

After you finish the first draft of the model, you move the project to the build phase.

Then, open the project in RPA Builder to implement the workflows for the bot activities.

## Create Activity Parameters in RPA Builder

The process uses variables to store and route data. These _Activity Parameters_ are defined in RPA Builder.

For your process you need three Activity Parameters:

* order_id
** an alphanumeric variable
** stores the order ID found in the order confirmation
** is returned at the end of the process
* tracking_no
** an alphanumeric variable
** stores the corresponding tracking number found in the order tracker application
** is returned at the end of the process if it is found
* is_order_id_found
** a boolean variable
** is set to true if the order id is found in the order tracking system
** routes the process flow through the gateway accordingly

image::activityparameters.png[Screenshot of the Activity Parameter window]

## Implement the Activities

You find some details of implementation of the activities as _Workflows_ on the next pages:

* xref:automation-usecase-legacysystemdataextraction-extractfrompdf.adoc[Implement the order ID extraction activity]
* xref:automation-usecase-legacysystemdataextraction-extractfromscreen.adoc[Implement the tracking number extraction activity]
* ...Gateway
* ...UserTask

## See Also

// Another introduction to automation
* xref:automation-tutorial-introduction.adoc[]
// Features of RPA Manager and RPA Builder used in this topic
* xref:create-rpa-project.adoc[]
* xref:rpa-manager::processautomation-develop.adoc[RPA Manager: Developing Automations]
* xref:rpa-builder::toolbox-variable-handling-activity-parameters.adoc[RPA Builder: Activity Parameters]
