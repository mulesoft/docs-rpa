
# Use a published RPA Process in Salesforce Flow

Publishing an invocable run configuration in RPA Manager, creates an External MuleSoft Service in Salesforce. The service's name consists of the name of the RPA Manager automation project without the blanks, followed by a '10'. 

To use your process in a Salesforce Flow, follow these steps:

. Create a new flow. In this example we use a screen flow for illustrational purposes.
. Create a resource for the process execution input:
+ 
image:invocableflow-resource-processExecution.png[Resource for the process execution]
+
[cols="1,2"]
|===
|*Field*
|*Value*

|Resource Type
|*Variable*.

|API Name
|Name of this resource; for example `ProcessParameters`.

|Data Type
|*Apex-Defined*.

|Apex Class
|Apex class *ExternalService__<RPA Project Name>10_ProcessExecution*, for example `ExternalService__ExampleProcess10_ProcessExecution``, 
|===

. Use a screen to set the input parameters for debugging purposes:
+
image:invocableflow-screen-inputvariables.png[]

. Assign all required values to the process parameters:
+ 
image:invocableflow-assignment-processExecution.png[]
+
The variable names are the same as the Activity Parameter names defined in RPA Builder:
+
image:invocableflow-activityparameters.png[]

. Choose the *Start Process* Action. You can filter for your process by name.
+
[cols="1,2"]
|===
|*Process Start Type*
|*Application*

|*Start Process V2*
|Ensures that only one instance of the process is running at the same time.

|*Start Process Non Idempotent V2*
|Enables parallel execution of the same process.

|===
+
image:invocableflow-action-choosestarttype.png[]

. Configure the action filling the body with the resource you defined:
+
image:invocableflow-action-startconfiguration.png[]

. Get the execution status for the first time:
+
image:invocableflow-action-getfirstexecutionstatus.png[]

. Create a resource for the status of the process execution:
+
image:invocableflow-resource-processExecutionStatus.png[]

. Create a resource for collecting all states that the started process returns while it runs:
+
image:invocableflow-resource-processExecutionStatusCollection.png[]

. Add the first returned status to the status collection:
+
image:invocableflow-assignment-processExecutionStatus1.png[]

. Since the run time of a process is not known, add a loop over all returned statuses:
+
image:invocableflow-loop.png[]

. To check for the current status, define three text constants: `Ã¬sStarted`, `running`, `error`.
. Add a decision element:
+
image:invocableflow-decision-checksucces.png[]

. If the returned status is not `Success`, add the current status to the loop collection:
+
image:invocableflow-assignment-processExecutionStatusN.png[]
+
This repeats until the process finishes 
and the status is `Success`.

. Get the final result and store the output values manually:
+
image:invocableflow-action-getfinalexecutionstatus.png[]

. Add a screen to view the results for debugging purposes:
+
image:invocableflow-screen-output.png[]

** See Also

* xref:invoke-rpa-from-flow.adoc[]
 