
= REST Call

You can use the _REST Call Action Step_ to fetch data directly from a
server and to collect the required information in a simple way.

You define the end point as you wish and you can assign parameters or
process variables to the call. This enables you to flexibly address any
REST interface. The response in JSON format (or XML) can be used as a
source variable during the remainder of the process run.

== REST Call via a proxy

You can also make the REST call via a proxy server. To do this, the REST
Call Action Step automatically retrieves the necessary information from
the Network Settings, provided you have made the appropriate settings
there.

The Network Settings can be found in the Settings Action Step, which is
located in the Workflow Initialization block.

For more information about the configurable settings, see xref:workflow-initialization.adoc#properties[Workflow Settings Properties]

== Properties

* *Authentication Options* 
** *API Key Authentication Key* 
+
The name of the API Key to use for authentication. 
** *API Key Authentication Value* 
+
The value to use when using API Key authentication. 
** *Basic Auth Credentials*
+
The credentials to use when using Basic Authentication. 
** *REST Call Authentication Type* 
+
Determines the type of authentication header to add to the call. Available values are: 
+
*** NoAuth
*** ApiKey
*** BearerToken
*** BasicAuth

* *REST Call Settings*

** *Base Url* 
+
The base URL of the service. 

** *Json Path* 
+
The Json path to the property of the response object, such as `$.access_token`.

** *Method Type* 
+
The method type to use for the REST call. Available values are: 
+
*** GET 
*** POST
*** PUT
*** PATCH
*** DELETE
*** HEAD 
*** OPTIONS

** *Parse Type* 
+
Specifies how to parse the REST call result. You can choose between _JsonPath_ and _XPath_.
+
Both types enable you to extract
exactly the information that you require without having to use special
scripting, which simplifies further processing as you can access
the desired result immediately.
+
The _Json Query_ Action Step enables you to read individual values from the Json object and process the result further.

** *Request body* 
+
The request body of the REST call to send. 

** *Request Body Type* 
+
The request body type of the REST call result. You can choose between _Json_ and _Form URL encoded_.

** *Url Extension* 
+
A path parameter that uniquely identifies the resource.

** *XPath* 
+
The Xpath expression to the property of the response object, for example, `/root/access_token/text()`.

== Inbound Variables

* *Base Url*
+
The base URL of the service. 
* *Url Extension*
+
A path parameter that uniquely identifies the resource.
* *Json Path Expression*
+
The Json path to the property of the response object, such as `$.access_token`.
* *XPath Expression* 
+
The Xpath expression to the property of the response object, for example, `/root/access_token/text()`.

== Outbound Variables

* *IsSuccessful* 
+
(boolean) Shows whether the REST Call was successful or not.

* *ResponseBody* 
+
(string) Returns the requested information as a string.

* *FirstItem* 
+
(array) The first element of the array is output as a string

* *Status* 
+
(integer) Displays the HTTP status code. For example, `200` is OK, which means the request was processed successfully and the result was
transferred in the answer.

* *ArrayCount* 
+
Indicates the number of elements of the returned array.

== Wizard

The wizard is split into the *Settings* and *Parameters* areas.

=== Settings 

image:rest-call-wizard-settings.png[75%, 75%, The Settings section of the REST Call Wizard]

In *Settings*, you specify the *Method Type*, that is, the required HTTP method. In the *Base Url*, you
specify the Host and Base Path. With the *Url Extension*, you uniquely identify the resource. You can either just type in the URL or define it via the pin variable. Use *Parse Type* to select between _JsonPath_ and _XPath_ which method to use for parsing the result. The *JsonPath Expression* specifies the path to the property of the response object.

=== Parameters 

image:rest-call-wizard-parameters.png[75%, 75%, The Parameters section of the REST Call Wizard]

In the *Parameters* area, you provide the required information to the
end point. There are various options for this, you can enter the
parameters directly in the URL or you can configure the parameters using the different tabs: _Request Body_,
_Header Parameter_, _Query Parameter_, and _Authentication_.

==== Request Body 

With the *Request Body*, you send data to the server, including, for
example, the form of communication between the server and the client.
According to convention, the methods GET, HEAD and DELETE do not require
a body (see also the network protocol RFC 7231).

In the Parameters area you can
find the mapped variables and their *Test Values*. The mapping is
carried out via the Pin variable.

With the test values,
you can check if the REST call runs successfully. To do this, having
entered all the data, click *Send* at the end of the
wizard.

The actual values of the mapped variables are not effective until the
production run of the Workflow.

===== Inserting Variables Into the Request Body 
//image:media\image5.png[image,width=315,height=87]

To insert the variables with the test values into the request body:

[calloutlist]
. In the *Request body with variables* area, click the position where you want to insert the variable. 
. In the *Test Values* section, click on the variable you want to insert. For Example `{A}: Activity Parameters.myVar`.

image:rest-call-wizard-parameters-variables.png[75%, 75%, The Request Body section of the REST Call Wizard]

The *Request body with variables* section shows the body with the contained variable. The *Request body with test values* section shows the body with the broken down variables of the
Json object. If you selected Json, the body is also highlighted for an
improved overview.

Select between *Json* or *Form URL Encoded* to choose
which type of request and answer is to be accepted by the server and
client. At the same time, the system checks if your entries are
compliant. You can also view the conversion of Json to form URL Encoded
under the header Parameters in the content type.

==== Header Parameter 

image:rest-call-wizard-header-parameter.png[75%, 75%, The Header Parameter tab of the REST Call Wizard]

With the *Header Parameter*, you describe exactly which resource is
collected or which answer format is required. You can add user-defined headers with the `x-` prefix, for example, `x-Customer` – `Customer ID`.
Here, you typically provide the login information for authentication of
a user to a server.

//image:media\image7.png[image,width=317,height=55]

==== Query Parameter 

image:rest-call-wizard-query-parameter.png[75%, 75%, The Query Parameter tab of the REST Call Wizard]

With the *Query Parameter*, you filter the resource and you can add
further information such as login information.

//image:media\image8.png[image,width=331,height=85]

==== Authentication

image:rest-call-wizard-authentication.png[75%, 75%, The Authentication tab of the REST Call Wizard]

The *Authentication* tab enables you to select the authentication type to add as a header and the corresponding credentials to use. The available authentication types are _API Key_, _Bearer Token_, and _Basic Auth_. If you don't want to use any authentication method, select _None_.

==== Result Viewer

In the *Result Viewer*, in the text results, you can view the entire
returned body, and in the parsed results, you can view the result
specified with JsonPath or Xpath.

//image:media\image9.png[Ein Bild, das Text enthält. Automatischgenerierte Beschreibung,width=604,height=136]

//For the other menu options, see also Properties.
////
== Example

In this example, login data is called up from a server via REST Call.

image:media\image10.png[Ein Bild, das Text enthält. Automatisch
generierte Beschreibung,width=577,height=467]
////

== See Also 

* xref:toolbox-variable-handling-jsonquery.adoc[Json Query]